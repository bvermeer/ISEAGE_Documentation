<link rel="stylesheet" type="text/css" href="css/style.css" />

<div id="container">
	<div id="header">
		<!--Main heading for the webpage -->
    <h1>
			ISEMaker Documentation
		</h1>
	</div>
	<div id="navigation">
		<ul>
			<li><a href="#">Home</a></li>
			<li><a href="#">About</a></li>
			<li><a href="#">Contact us</a></li>
		</ul>
	</div>
	<div id="content-container1">
		<div id="content-container2">
		
			<!-- Left column -->
			<div id="section-navigation">
				<ul>
					<li><a href="ISEMaker.html">A. ISEMaker Overview</a></li>
					<li><a href="ESXi_config.html">1. Install and Configure ESXi</a></li>
					<li><a href="ESXi_VM_Network_config.html">2. Configure the Virtual Network</a></li>
					<li><a href="ESXi_Install_VMs.html">3. Install the Virtual Machines</a></li>
				</ul>
			</div>
			
			<!-- Center column --> 
			<div id="content">
				<h2>
					ESXi Virtual Network Configuration
				</h2>
				<p>
					In this section the virtual network will be created to provide the foundation to connect the various components of ISEAGE. It is important that you name the virtual switches exactly as shown in the directions. That way when you add the pre-built virtual machines later, the network connections will be automatically made.
					
					<br></br>
					
					<b> Note: </b> Your server needs at least 5 physical network connections to work with these directions!
				</p>
				
				<h2>
					Modify vSwitch0	
				</h2>
				<p>
					<ol>
						<li> In the vSphere client, go to the <b> Configuration </b> tab. </li>

						<li> Click on the <b> Networking </b> link in the Hardware box on the left. The initial configuration will look similar to <a href="#figure_2"> Figure 2 </a>. </li>
							
						</p>
						
							<!-- Add the image for how to get to the network configuration section (figure 1) -->
							<br />
							<p class="figure_center" id="figure_1"> <img src="images/network_config.png" alt="Figure 1: Network Configuration Section" width="75%"> 
							<br />
							<br />
							Figure 1: Network Configuration Section</p>
							<br />
						
						<p>
								
							<li> Click on the <b> Properties... </b> link next to vSwitch0 </li>
							
						</p>
						
						<!-- Add the image for the ISEMaker topology (figure 2) -->
						<br />
						<p class="figure_center" id="figure_2"> <img src="images/Initial_network.png" alt="Figure 2: Initial Network Configuration" width="50%"> 
						<br />
						<br />
						Figure 2: Initial Network Configuration</p>
						<br />

						
						<p>
						
							<li> Make sure that the vSwitch is highlighted and then click the <b> Edit... </b> button. </li>
						
						</p>
						
						<!-- Add the first image for editing the switch security (figure 3) -->
						<br />
						<p class="figure_center" id="figure_3"> <img src="images/switch_security1.png" alt="Figure 3: Switch Settings" width="50%"> 
						<br />
						<br />
						Figure 3: Switch Settings</p>
						<br />
						
							<li> Go to the <b> Security </b> tab and change <b> Promiscuous Mode </b> to <b> Accept </b> and then click <b> OK. </b> </li>
						
						</p>
						
						<!-- Add the second image for editing the switch security (figure 4) -->
						<br />
						<p class="figure_center" id="figure_4"> <img src="images/switch_security2.png" alt="Figure 4: Promiscuous Mode" width="50%"> 
						<br />
						<br />
						Figure 4: Promiscuous Mode</p>
						<br />
						
							<li> Next, highlight the second item in the list on the left (the name of the vSwitch) and then click the <b> Edit... </b> button. </li>
					
						<!-- Add the image for editing the switch name (figure 5) -->
						<br />
						<p class="figure_center" id="figure_5"> <img src="images/vSwitch_name.png" alt="Figure 5: Edit vSwitch Name" width="50%"> 
						<br />
						<br />
						Figure 5: Edit vSwitch Name</p>
						<br />
						
							<li> Change the name of the vSwitch to be "External Network", click <b> OK </b>, and then click the <b> Close </b> button on the vSwitch properties window. </li>
					
						<!-- Add the image for editing the switch name (figure 6) -->
						<br />
						<p class="figure_center" id="figure_6"> <img src="images/vSwitch_edit_name.png" alt="Figure 6: Change vSwitch Name" width="50%"> 
						<br />
						<br />
						Figure 6: Change vSwitch Name</p>
						<br />
						
							<li> Now, click on <b> Add Networking... </b> to create a new vSwitch. </li>
					
						<!-- Add the image for creating a switch (figure 7) -->
						<br />
						<p class="figure_center" id="figure_7"> <img src="images/Add_networking.png" alt="Figure 7: Add vSwitch" width="30%"> 
						<br />
						<br />
						Figure 7: Add vSwitch</p>
						<br />
						
						<h2>
							Add the other vSwitches	
						</h2>
				
							<li> Click next to create a Virtual Machine type switch. </li>
					
						<!-- Add the image for creating a VM type switch (figure 8) -->
						<br />
						<p class="figure_center" id="figure_8"> <img src="images/new_VM_switch.png" alt="Figure 8: Create a VM Switch" width="50%"> 
						<br />
						<br />
						Figure 8: Create a VM Switch</p>
						<br />
						
							<li> Make sure all of the physical network connection (vmnicX) boxes are unchecked for this switch to create a purely virtual switch and then click next. </li>
					
						<!-- Add the image for editing the vSwitch physical connections (figure 9) -->
						<br />
						<p class="figure_center" id="figure_9"> <img src="images/vSwitch_physical_connections.png" alt="Figure 9: Edit vSwitch Physical Connections" width="50%"> 
						<br />
						<br />
						Figure 9: Edit vSwitch Physical Connections</p>
						<br />
						
							<li> Name the switch "Air Gap", click <b> Next </b>, and then click <b> Finish </b> on the next screen. </li>
					
						<!-- Add the image for naming the vSwitch "Air Gap" (figure 10) -->
						<br />
						<p class="figure_center" id="figure_10"> <img src="images/name_air_gap.png" alt="Figure 10: Name the vSwitch Air Gap" width="50%"> 
						<br />
						<br />
						Figure 10: Name the vSwitch Air Gap</p>
						<br />
						
							<li> Your virtual network layout should now look similar to <a href="#figure_11"> Figure 11 </a> </li>
					
						<!-- Add the image showing what the network layout should look like (figure 11) -->
						<br />
						<p class="figure_center" id="figure_11"> <img src="images/example_network_layout_1.png" alt="Figure 11: Network layout" width="50%"> 
						<br />
						<br />
						Figure 11: Network layout</p>
						<br />
						
							<li> Repeat steps 9 through 11 to create all of the switches shown in <a href="#table1">Table 1</a> to create the Virtual Network for ISEAGE.
						       	Do not worry about the promiscuous column for now. We will take care of this in the next step.</li>
					
						<br />
						
						<table id="table1" class="reference" style="width:60%">
							<tr>
								<th>Name</th>
								<th>Network Label</th>
								<th>Promiscuous</th>
								<th>Network Adapter (Vmnic)</th>								
							</tr>
							<tr>
								<td>vSwitch0</td>
								<td>External Network</td>
								<td>Yes</td>		
								<td>Vmnic0</td>										
							</tr>
							<tr>
								<td>vSwitch1</td>
								<td>Air Gap</td>
								<td>No</td>		
								<td>None</td>										
							</tr>
							<tr>
								<td>vSwitch2</td>
								<td>Backplane</td>
								<td>Yes</td>		
								<td>None</td>										
							</tr>
							<tr>
								<td>vSwitch3</td>
								<td>Control</td>
								<td>Yes</td>		
								<td>None</td>										
							</tr>
							<tr>
								<td>vSwitch4</td>
								<td>Keyhole</td>
								<td>Yes</td>		
								<td>Vmnic1</td>										
							</tr>
							<tr>
								<td>vSwitch5</td>
								<td>ISEAGE1</td>
								<td>Yes</td>		
								<td>Vmnic2</td>										
							</tr>
							<tr>
								<td>vSwitch6</td>
								<td>ISEAGE2</td>
								<td>Yes</td>		
								<td>Vmnic3</td>										
							</tr>
							<tr>
								<td>vSwitch7</td>
								<td>TAP</td>
								<td>Yes</td>		
								<td>Vmnic4</td>										
							</tr>
							<tr>
								<td>vSwitch8</td>
								<td>Ice Bridge</td>
								<td>Yes</td>		
								<td>None</td>										
							</tr>
							<tr>
								<td>vSwitch9</td>
								<td>pfSense WAN</td>
								<td>Yes</td>		
								<td>None</td>										
							</tr>
							<tr>
								<td>vSwitch10</td>
								<td>Private net</td>
								<td>Yes</td>		
								<td>None (optional)</td>										
							</tr>
						</table>
						
						<br />
						
						<li> Now we will go back trough the switches we just created and enable promiscuous mode.</li> 
					
						<br />
						
						<p>
								
							<li> Click on the <b> Properties... </b> link next to vSwitch0 </li>
							
						</p>
						
						<!-- Add the image for the ISEMaker topology (figure 2) -->
						<br />
						<p class="figure_center" id="figure_12"> <img src="images/Initial_network.png" alt="Figure 2: Initial Network Configuration" width="50%"> 
						<br />
						<br />
						Figure 12: Initial Network Configuration</p>
						<br />

						
						<p>
						
							<li> Make sure that the vSwitch is highlighted and then click the <b> Edit... </b> button. </li>
						
						</p>
						
						<!-- Add the first image for editing the switch security (figure 3) -->
						<br />
						<p class="figure_center" id="figure_13"> <img src="images/switch_security1.png" alt="Figure 3: Switch Settings" width="50%"> 
						<br />
						<br />
						Figure 13: Switch Settings</p>
						<br />
						<p>

							<li> Go to the <b> Security </b> tab and change <b> Promiscuous Mode </b> to <b> Accept </b> and then click <b> OK. </b> </li>
						
						</p>
						
						<!-- Add the second image for editing the switch security (figure 4) -->
						<br />
						<p class="figure_center" id="figure_14"> <img src="images/switch_security2.png" alt="Figure 4: Promiscuous Mode" width="50%"> 
						<br />
						<br />
						Figure 14: Promiscuous Mode</p>
						<br />
						<p>

							<li> Repeat steps 15 through 17 for the rest of the switches (except vSwitch1 - Air Gap) to enable promiscuous mode on the rest of the switches. </li>
						
						</p>
				
						<h2>
							ESXi Virtual Machine Install 
						</h2>
				
						<p>
						       	After configuring the virtual network you are ready to download and install the Virtual Machines. Proceed to the
							<a href="ESXi_Install_VMs.html"> Install Virtual Machines </a> for directions on how to download and install the Virtual Machines for ISEAGE.
						</p>
					</ol>
				

			<!-- Right column -->
			</div>
			<div id="aside">
				<h3>
					Overview	
				</h3>
				<p>
					In this section you will configure the virtual network to link the various parts of ISEAGE together. You may add to this network configuration if your particular set-up has different requirements.
				</p>
			</div>
			<div id="footer">
        Updated: September 9, 2014
			</div>
		</div>
	</div>
</div>
